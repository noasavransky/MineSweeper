{"ast":null,"code":"var _jsxFileName = \"C:\\\\hometaskwix\\\\minesweeper\\\\src\\\\components\\\\gameBody.js\";\nimport React from 'react';\nimport logo from '../images/logo192.png';\nimport '../App.css';\nimport { Col, Row, Grid } from 'react-flexbox-grid';\n\nclass GameBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      height: 10,\n      width: 10,\n      mines: 10,\n      flags: {\n        good: 0,\n        bad: 0\n      },\n      displayData: \"loading\",\n      dataTable: []\n    };\n    this.newGame = this.newGame.bind(this);\n    this.updateGameSettings = this.updateGameSettings.bind(this);\n    this.createBoxesTable = this.createBoxesTable.bind(this);\n    this.createDataTable = this.createDataTable.bind(this);\n    this.setMines = this.setMines.bind(this);\n    this.applyAround = this.applyAround.bind(this);\n    this.increaseValue = this.increaseValue.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.fixFlags = this.fixFlags.bind(this);\n    this.formatBoxesTable = this.formatBoxesTable.bind(this);\n    this.reveal = this.reveal.bind(this); //this.boxesTable = this.boxesTable.bind(this);\n  }\n\n  newGame() {\n    console.log(\"new Game\");\n    this.updateGameSettings();\n    this.dataTable = this.createDataTable();\n    this.setMines();\n    console.log(this.dataTable);\n    this.setState({\n      dataTable: this.dataTable\n    }); //this.boxesTable = this.createBoxesTable();\n    // return (\n    //     <div className=\"Mine-grid\">\n    //         {this.formatBoxesTable()}\n    //     </div>\n    // )\n  }\n\n  updateGameSettings() {} // to get the new game numbers from the user and set themto the state;\n\n\n  createDataTable() {\n    console.log(\"create data State\");\n    var dataTable = Array.from({\n      length: this.state.width\n    }, () => Array.from({\n      length: this.state.height\n    }, () => ({\n      value: 0,\n      isMine: false,\n      revealed: false\n    })));\n    return dataTable;\n  }\n\n  setMines() {\n    console.log(\"set Mines\");\n\n    for (let mineCount = 0; mineCount < this.state.mines; mineCount++) {\n      let x = Math.floor(Math.random() * (this.state.width - 1));\n      let y = Math.floor(Math.random() * (this.state.height - 1)); //if(!this.boxesTable[x][y].checkIsMine())\n\n      if (!this.dataTable[x][y].isMine) {\n        //this.boxesTable[x][y].setMine()\n        this.dataTable[x][y].isMine = true;\n        this.applyAround({\n          x,\n          y\n        }, this.increaseValue);\n      } else {\n        mineCount--;\n      }\n    }\n\n    console.log(this.dataTable);\n  }\n\n  createBoxesTable() {\n    var boxesTable = this.dataTable.map((cols, w) => {\n      //var boxes2 = cols.map((box, h) => (new MineBox({id: w.toString() + \",\" + h.toString(), click: this.onClick, isMine:box.isMine, value:box.value})))\n      //var boxes = cols.map((box, h) => (<MineBox key={w.toString() + \",\" + h.toString()} id={w.toString() + \",\" + h.toString()} click={this.onClick} isMine={box.isMine} value={box.value}></MineBox>))\n      var boxes2 = cols.map((box, h) => React.createElement(MineBox, {\n        id: w.toString() + \",\" + h.toString(),\n        click: this.onClick,\n        isMine: box.isMine,\n        value: box.value,\n        revealed: false\n      }));\n      return boxes2;\n    });\n    console.log(boxesTable);\n    return boxesTable;\n  }\n\n  formatBoxesTable() {\n    console.log(this.state.dataTable);\n\n    if (this.state.dataTable.length == 0) {\n      return \"loading\";\n    }\n\n    let rows = [];\n\n    for (let height = 0; height < this.state.height; height++) {\n      let cells = [];\n\n      for (let width = 0; width < this.state.width; width++) {\n        let elem = /*#__PURE__*/React.createElement(Col, {\n          key: width.toString() + \",\" + height.toString(),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 28\n          }\n        }, /*#__PURE__*/React.createElement(MineBox, {\n          id: width.toString() + \",\" + height.toString(),\n          click: this.onClick,\n          isMine: this.state.dataTable[width][height].isMine,\n          value: this.state.dataTable[width][height].value,\n          revealed: this.state.dataTable[width][height].revealed,\n          flagged: this.state.dataTable[width][height].flagged,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }\n        }));\n        cells.push(elem);\n      }\n\n      let newRow = React.createElement(Row, {\n        className: \"Mine-row\"\n      }, cells);\n      rows.push(newRow);\n    }\n\n    let newTable = React.createElement(Grid, {\n      className: \"Mine-grid\"\n    }, rows);\n    return newTable;\n  }\n\n  applyAround(point, toApplyFunc) {\n    console.log(\"apply Around\");\n    let height = this.state.height;\n    let width = this.state.width;\n\n    function checkAndApply(point) {\n      // check and apply\n      console.log(\"check and apply\");\n\n      if (point.x >= 0 && point.y >= 0 && point.x < width && point.y < height) {\n        toApplyFunc(point);\n      }\n    }\n\n    let x = point.x;\n    let y = point.y; // left side          \n\n    checkAndApply({\n      x: x - 1,\n      y\n    }); // <-\n\n    checkAndApply({\n      x: x - 1,\n      y: y - 1\n    }); //<-^\n\n    checkAndApply({\n      x: x - 1,\n      y: y + 1\n    }); //<-v\n    // right side\n\n    checkAndApply({\n      x: x + 1,\n      y\n    }); // ->\n\n    checkAndApply({\n      x: x + 1,\n      y: y - 1\n    }); // ->^\n\n    checkAndApply({\n      x: x + 1,\n      y: y + 1\n    }); // -> v\n    // up and down\n\n    checkAndApply({\n      x,\n      y: y - 1\n    }); // ^\n\n    checkAndApply({\n      x,\n      y: y + 1\n    }); // V\n  }\n\n  increaseValue(point) {\n    console.log(\"increase Value\");\n    this.dataTable[point.x][point.y].value++;\n  }\n\n  onClick(shift, box) {\n    console.log(\"on click\");\n\n    if (shift) {\n      this.fixFlags(box);\n    } else {\n      if (box.isMine) {\n        this.gameOver();\n      }\n\n      let id = this.convertId(box.id);\n      this.reveal(id);\n    }\n  }\n\n  fixFlags(box) {}\n\n  reveal(id) {\n    let {\n      x,\n      y\n    } = id; //this.boxesTable[x][y].type.prototype.reveal();\n\n    let tempGrid = this.state.dataTable;\n\n    if (!tempGrid[x][y].revealed) {\n      tempGrid[x][y].revealed = true;\n      console.log(\"revealed:\" + x + \",\" + y);\n      this.setState({\n        dataTable: tempGrid\n      });\n\n      if (tempGrid[x][y].value == 0) {\n        this.applyAround(id, this.reveal);\n      }\n    }\n  }\n\n  convertId(id) {\n    if (typeof id == \"string\") {\n      let [x, y] = id.split(\",\");\n      return {\n        x,\n        y\n      };\n    }\n\n    return id;\n  }\n\n  // to fix if on opposite case arises\n  gameOver() {}\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.newGame,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }\n    }, \"new game\"), this.formatBoxesTable());\n  }\n\n}\n\nclass MineBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.checkIsMine = this.checkIsMine.bind(this);\n    this.handleClick = this.handleClick.bind(this); // this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  checkIsMine() {\n    return this.props.isMine;\n  }\n\n  handleClick(e) {\n    const isShift = e.shiftKey;\n    console.log(e.target);\n    let boxData = {\n      isMine: this.props.isMine,\n      value: this.props.value,\n      flag: this.props.flagged,\n      id: this.props.id\n    };\n    this.props.click(isShift, boxData);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"Box-logo \" + (this.props.revealed ? \"Revealed \" : \"\") + (this.state.flagged ? \"Flagged \" : \"\"),\n      alt: this.props.value,\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }\n    });\n  }\n\n}\n\nexport default GameBody;","map":{"version":3,"sources":["C:/hometaskwix/minesweeper/src/components/gameBody.js"],"names":["React","logo","Col","Row","Grid","GameBody","Component","constructor","props","state","height","width","mines","flags","good","bad","displayData","dataTable","newGame","bind","updateGameSettings","createBoxesTable","createDataTable","setMines","applyAround","increaseValue","onClick","fixFlags","formatBoxesTable","reveal","console","log","setState","Array","from","length","value","isMine","revealed","mineCount","x","Math","floor","random","y","boxesTable","map","cols","w","boxes2","box","h","createElement","MineBox","id","toString","click","rows","cells","elem","flagged","push","newRow","className","newTable","point","toApplyFunc","checkAndApply","shift","gameOver","convertId","tempGrid","split","render","checkIsMine","handleClick","e","isShift","shiftKey","target","boxData","flag"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport logo from '../images/logo192.png';\r\nimport '../App.css';\r\nimport { Col, Row, Grid } from 'react-flexbox-grid'\r\n\r\nclass GameBody extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            height: 10, \r\n            width: 10, \r\n            mines: 10, \r\n            flags: {good: 0, bad: 0}, \r\n            displayData:\"loading\", \r\n            dataTable: []};\r\n\r\n        this.newGame = this.newGame.bind(this);\r\n        this.updateGameSettings = this.updateGameSettings.bind(this);\r\n        this.createBoxesTable = this.createBoxesTable.bind(this);\r\n        this.createDataTable = this.createDataTable.bind(this);\r\n        this.setMines = this.setMines.bind(this);\r\n        this.applyAround = this.applyAround.bind(this);\r\n        this.increaseValue = this.increaseValue.bind(this);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.fixFlags = this.fixFlags.bind(this);\r\n        this.formatBoxesTable = this.formatBoxesTable.bind(this);\r\n        this.reveal = this.reveal.bind(this);\r\n        \r\n        //this.boxesTable = this.boxesTable.bind(this);\r\n    }\r\n\r\n    newGame() {\r\n        console.log(\"new Game\");\r\n        this.updateGameSettings();\r\n        this.dataTable = this.createDataTable()\r\n        this.setMines();\r\n        console.log(this.dataTable);\r\n        this.setState({dataTable: this.dataTable});\r\n        //this.boxesTable = this.createBoxesTable();\r\n\r\n        // return (\r\n        //     <div className=\"Mine-grid\">\r\n        //         {this.formatBoxesTable()}\r\n        //     </div>\r\n        // )\r\n                    \r\n    }\r\n    \r\n\r\n    updateGameSettings() {} // to get the new game numbers from the user and set themto the state;\r\n\r\n    createDataTable() {\r\n        console.log(\"create data State\");\r\n\r\n        var dataTable = Array.from({length: this.state.width}, () => Array.from({length: this.state.height}, () => ({value: 0, isMine: false, revealed:false})))\r\n\r\n        return dataTable;\r\n    }\r\n\r\n\r\n    setMines() {\r\n        console.log(\"set Mines\");\r\n        for(let mineCount = 0; mineCount < this.state.mines; mineCount++)\r\n        {\r\n            let x = Math.floor(Math.random() * (this.state.width - 1));\r\n            let y = Math.floor(Math.random() * (this.state.height - 1));\r\n            \r\n            //if(!this.boxesTable[x][y].checkIsMine())\r\n            if(!this.dataTable[x][y].isMine)            \r\n            {\r\n                //this.boxesTable[x][y].setMine()\r\n                this.dataTable[x][y].isMine = true;\r\n                \r\n                this.applyAround({x,y},this.increaseValue)\r\n            }\r\n            else\r\n            {\r\n                mineCount--\r\n            }\r\n        }\r\n\r\n        console.log(this.dataTable);\r\n\r\n    }\r\n\r\n    createBoxesTable() {\r\n        var boxesTable = this.dataTable.map((cols, w) => {\r\n            //var boxes2 = cols.map((box, h) => (new MineBox({id: w.toString() + \",\" + h.toString(), click: this.onClick, isMine:box.isMine, value:box.value})))\r\n            //var boxes = cols.map((box, h) => (<MineBox key={w.toString() + \",\" + h.toString()} id={w.toString() + \",\" + h.toString()} click={this.onClick} isMine={box.isMine} value={box.value}></MineBox>))\r\n            var boxes2 = cols.map((box, h) => (React.createElement(MineBox,{id: w.toString() + \",\" + h.toString(), click: this.onClick, isMine:box.isMine, value:box.value, revealed:false})))\r\n            return boxes2;\r\n        }) \r\n        console.log(boxesTable);\r\n        return boxesTable;\r\n    }\r\n\r\n    formatBoxesTable() {\r\n        console.log(this.state.dataTable);\r\n        if (this.state.dataTable.length == 0)\r\n        {\r\n            return \"loading\"\r\n        }\r\n\r\n\r\n        let rows = [];\r\n        for (let height = 0; height < this.state.height; height++) {\r\n            let cells = [];\r\n            for (let width = 0; width < this.state.width; width++) {\r\n\r\n                let elem = <Col key={width.toString() + \",\" + height.toString()}>\r\n                    <MineBox id={width.toString() + \",\" + height.toString()} \r\n                             click={this.onClick} \r\n                             isMine={this.state.dataTable[width][height].isMine} \r\n                             value={this.state.dataTable[width][height].value}\r\n                             revealed={this.state.dataTable[width][height].revealed}\r\n                             flagged={this.state.dataTable[width][height].flagged}\r\n                             ></MineBox>\r\n                </Col> ;\r\n                cells.push(elem);\r\n            }\r\n            let newRow = React.createElement(\r\n                Row,\r\n                {className: \"Mine-row\"},\r\n                cells\r\n            )\r\n            rows.push(newRow)\r\n        }\r\n\r\n        let newTable = React.createElement(\r\n            Grid,\r\n            {className: \"Mine-grid\"},\r\n            rows\r\n        )\r\n\r\n        return newTable;\r\n    }\r\n\r\n    applyAround(point,toApplyFunc)\r\n    {        \r\n        console.log(\"apply Around\");\r\n        \r\n        let height = this.state.height;\r\n        let width = this.state.width;\r\n        function checkAndApply(point){// check and apply\r\n            console.log(\"check and apply\");\r\n            \r\n            if(point.x >= 0 && point.y >= 0 && point.x < width && point.y < height) \r\n            {\r\n                toApplyFunc(point)\r\n            }\r\n        }\r\n\r\n        let x = point.x;\r\n        let y = point.y;\r\n\r\n        // left side          \r\n        checkAndApply({x: x - 1, y});// <-\r\n        checkAndApply({x: x - 1, y: y - 1});//<-^\r\n        checkAndApply({x: x - 1, y: y + 1})//<-v\r\n          \r\n        // right side\r\n        checkAndApply({x: x + 1, y});// ->\r\n        checkAndApply({x: x + 1, y: y -1});// ->^\r\n        checkAndApply({x: x + 1, y: y + 1})// -> v\r\n          \r\n        // up and down\r\n        checkAndApply({x, y: y - 1});// ^\r\n        checkAndApply({x, y: y + 1})// V\r\n    }\r\n\r\n    increaseValue (point) {\r\n        console.log(\"increase Value\");\r\n        this.dataTable[point.x][point.y].value++;\r\n    }\r\n\r\n    onClick (shift, box) {\r\n        console.log(\"on click\");\r\n        if (shift)\r\n        {\r\n            this.fixFlags(box)\r\n        }\r\n        else\r\n        {\r\n            if (box.isMine)\r\n            {\r\n                this.gameOver()\r\n            }\r\n\r\n            let id = this.convertId(box.id)\r\n            this.reveal(id)\r\n        }\r\n        \r\n\r\n    }\r\n\r\n    fixFlags(box){}\r\n\r\n    reveal(id){\r\n        let {x,y} = id;\r\n        //this.boxesTable[x][y].type.prototype.reveal();\r\n        let tempGrid = this.state.dataTable;\r\n        if (!tempGrid[x][y].revealed)\r\n        {\r\n            tempGrid[x][y].revealed = true;\r\n            console.log(\"revealed:\" + x + \",\" + y);\r\n            this.setState({dataTable: tempGrid});\r\n\r\n            if (tempGrid[x][y].value == 0)\r\n            {\r\n                this.applyAround(id, this.reveal)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    convertId(id) { \r\n        if (typeof id == \"string\")\r\n        {\r\n            let [x,y]= id.split(\",\");\r\n            return {x,y};\r\n        }\r\n        return id;\r\n    };// to fix if on opposite case arises\r\n\r\n    gameOver(){}\r\n\r\n    render() {\r\n        \r\n        return (\r\n        <div>\r\n            <button onClick={this.newGame}>new game</button>\r\n            {this.formatBoxesTable()}\r\n        </div>\r\n        );\r\n    };\r\n}\r\n\r\n\r\nclass MineBox extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.checkIsMine = this.checkIsMine.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        \r\n        \r\n        // this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    checkIsMine() {\r\n        return this.props.isMine;\r\n    }\r\n   \r\n\r\n    handleClick (e) {\r\n        const isShift = e.shiftKey;\r\n        console.log(e.target);\r\n        \r\n\r\n        let boxData = {\r\n            isMine: this.props.isMine,\r\n            value: this.props.value,\r\n            flag: this.props.flagged,\r\n            id: this.props.id\r\n        }\r\n\r\n        this.props.click(isShift, boxData);\r\n\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        \r\n          <img src={logo} className={\"Box-logo \" +  (this.props.revealed? \"Revealed \": \"\") + (this.state.flagged? \"Flagged \": \"\")} alt={this.props.value} onClick={this.handleClick}/>\r\n        \r\n      );\r\n    }\r\n}\r\nexport default GameBody;\r\n"]},"metadata":{},"sourceType":"module"}