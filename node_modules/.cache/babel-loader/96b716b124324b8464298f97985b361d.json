{"ast":null,"code":"import _slicedToArray from\"C:\\\\hometaskwix\\\\minesweeper\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"C:\\\\hometaskwix\\\\minesweeper\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\hometaskwix\\\\minesweeper\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\hometaskwix\\\\minesweeper\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"C:\\\\hometaskwix\\\\minesweeper\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\hometaskwix\\\\minesweeper\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import logo from'../images/logo192.png';import base from'../images/base.png';import flag from'../images/flag.png';import pic0 from'../images/0.png';import pic1 from'../images/1.png';import pic2 from'../images/2.png';import pic3 from'../images/3.png';import pic4 from'../images/4.png';import pic5 from'../images/5.png';import pic6 from'../images/6.png';import pic7 from'../images/7.png';import pic8 from'../images/8.png';import mine from'../images/mine.png';import genie from'../images/genie.png';import'../App.css';import{Col,Row,Grid}from'react-flexbox-grid';import GameHeder from'./gameHeader.js';var GameBody=/*#__PURE__*/function(_React$Component){_inherits(GameBody,_React$Component);var _super=_createSuper(GameBody);function GameBody(props){var _this;_classCallCheck(this,GameBody);_this=_super.call(this,props);_this.state={height:10,width:10,mines:10,flags:{good:0,bad:0},gameStatus:\"pre\",showAll:false,alert:\"\",dataTable:[]};_this.newGame=_this.newGame.bind(_assertThisInitialized(_this));_this.updateGameSettings=_this.updateGameSettings.bind(_assertThisInitialized(_this));_this.createDataTable=_this.createDataTable.bind(_assertThisInitialized(_this));_this.setMines=_this.setMines.bind(_assertThisInitialized(_this));_this.applyAround=_this.applyAround.bind(_assertThisInitialized(_this));_this.increaseValue=_this.increaseValue.bind(_assertThisInitialized(_this));_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));_this.fixFlags=_this.fixFlags.bind(_assertThisInitialized(_this));_this.formatBoxesTable=_this.formatBoxesTable.bind(_assertThisInitialized(_this));_this.reveal=_this.reveal.bind(_assertThisInitialized(_this));_this.revealAll=_this.revealAll.bind(_assertThisInitialized(_this));_this.superman=_this.superman.bind(_assertThisInitialized(_this));_this.handleSuperman=_this.handleSuperman.bind(_assertThisInitialized(_this));return _this;}_createClass(GameBody,[{key:\"newGame\",value:function newGame(){console.log(\"new Game\");this.dataTable=this.createDataTable();this.setMines();console.log(\"new Game data\");console.log(this.dataTable);this.setState({dataTable:this.dataTable,gameStatus:\"ongoing\",showAll:false});}},{key:\"updateGameSettings\",value:function updateGameSettings(newGameData){console.log(\"update game\");newGameData.gameStatus=\"pre\";newGameData.flags={good:0,bad:0};this.setState(newGameData,this.newGame);}},{key:\"createDataTable\",value:function createDataTable(){var _this2=this;console.log(\"create data State\");var dataTable=Array.from({length:this.state.width},function(){return Array.from({length:_this2.state.height},function(){return{value:0,isMine:false,revealed:false,flagged:false};});});return dataTable;}},{key:\"setMines\",value:function setMines(){console.log(\"set Mines\");for(var mineCount=0;mineCount<this.state.mines;mineCount++){var x=Math.floor(Math.random()*this.state.width);var y=Math.floor(Math.random()*this.state.height);//if(!this.boxesTable[x][y].checkIsMine())\nif(!this.dataTable[x][y].isMine){//this.boxesTable[x][y].setMine()\nthis.dataTable[x][y].isMine=true;this.applyAround({x:x,y:y},this.increaseValue);}else{mineCount--;}}console.log(this.dataTable);}},{key:\"formatBoxesTable\",value:function formatBoxesTable(){console.log(this.state.dataTable);if(this.state.gameStatus===\"pre\"){return;}var rows=[];for(var height=0;height<this.state.height;height++){var cells=[];for(var width=0;width<this.state.width;width++){var elem=/*#__PURE__*/React.createElement(Col,{key:width.toString()+\",\"+height.toString()},/*#__PURE__*/React.createElement(MineBox,{id:width.toString()+\",\"+height.toString(),click:this.onClick,isMine:this.state.dataTable[width][height].isMine,value:this.state.dataTable[width][height].value,revealed:this.state.dataTable[width][height].revealed,flagged:this.state.dataTable[width][height].flagged,showAll:this.state.showAll}));cells.push(elem);}var newRow=React.createElement(Row,{className:\"Mine-row\"},cells);rows.push(newRow);}var newTable=React.createElement(Grid,{className:\"Mine-grid\"},rows);return newTable;}},{key:\"applyAround\",value:function applyAround(point,toApplyFunc){var height=this.state.height;var width=this.state.width;function checkAndApply(point){// check and apply\nconsole.log(\"check and apply\");console.log(point);if(point.x>=0&&point.y>=0&&point.x<width&&point.y<height){toApplyFunc(point);}}var x=point.x,y=point.y;// left side          \ncheckAndApply({x:x-1,y:y});// <-\ncheckAndApply({x:x-1,y:y-1});//<-^\ncheckAndApply({x:x-1,y:y+1});//<-v\n// right side\ncheckAndApply({x:x+1,y:y});// ->\ncheckAndApply({x:x+1,y:y-1});// ->^\ncheckAndApply({x:x+1,y:y+1});// -> v\n// up and down\ncheckAndApply({x:x,y:y-1});// ^\ncheckAndApply({x:x,y:y+1});// V\n}},{key:\"increaseValue\",value:function increaseValue(point){this.dataTable[point.x][point.y].value++;}},{key:\"onClick\",value:function onClick(shift,box){console.log(\"on click\");if(shift){this.fixFlags(box);}else{if(box.isMine){this.gameOver();}var id=this.convertId(box.id);this.reveal(id);}}},{key:\"fixFlags\",value:function fixFlags(box){var _this3=this;var _this$convertId=this.convertId(box.id),x=_this$convertId.x,y=_this$convertId.y;var currBox=this.state.dataTable[x][y];if(this.state.flags.bad+this.state.flags.good==this.state.mines&&!currBox.flagged){var alert=/*#__PURE__*/React.createElement(\"h4\",null,\"Your out of Flags!\");this.setState({alert:alert});return;}var goodOrBad=currBox.isMine?\"good\":\"bad\";var change=currBox.flagged?-1:1;var flags=this.state.flags;flags[goodOrBad]+=change;this.setState({flags:flags,alert:\"\"},function(){if(_this3.state.flags.good==_this3.state.mines){_this3.setState({gameStatus:\"win\"});_this3.revealAll(true);}});var tempGrid=this.state.dataTable;tempGrid[x][y].flagged=!tempGrid[x][y].flagged;this.setState({dataTable:tempGrid});}},{key:\"reveal\",value:function reveal(id){var x=id.x,y=id.y;var tempGrid=this.state.dataTable;console.log(id);if(!tempGrid[x][y].flagged&&!tempGrid[x][y].revealed){tempGrid[x][y].revealed=true;console.log(\"revealed:\"+x+\",\"+y);this.setState({dataTable:tempGrid});if(tempGrid[x][y].value==0){this.applyAround(id,this.reveal);}}}},{key:\"convertId\",value:function convertId(id){if(typeof id==\"string\"){var _id$split=id.split(\",\"),_id$split2=_slicedToArray(_id$split,2),x=_id$split2[0],y=_id$split2[1];x=x*1;y=y*1;return{x:x,y:y};}return id;}},{key:\"gameOver\",value:function gameOver(){this.revealAll(true);this.setState({gameStatus:\"lose\"});}},{key:\"revealAll\",value:function revealAll(toReveal){this.setState({showAll:toReveal});}},{key:\"handleSuperman\",value:function handleSuperman(event){this.state.showAll?this.revealAll(false):this.revealAll(true);}},{key:\"superman\",value:function superman(){if(this.state.gameStatus!==\"ongoing\")return;var superman=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Do you wish to see the answer? \",/*#__PURE__*/React.createElement(\"img\",{src:genie,className:\"Genie-pic\",alt:\"see the truth!\",onClick:this.handleSuperman})));return superman;}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(GameHeder,{height:this.state.height,width:this.state.width,mines:this.state.mines,flags:this.state.flags,update:this.updateGameSettings,status:this.state.gameStatus}),this.state.alert,this.formatBoxesTable(),this.superman());}}]);return GameBody;}(React.Component);var MineBox=/*#__PURE__*/function(_React$Component2){_inherits(MineBox,_React$Component2);var _super2=_createSuper(MineBox);function MineBox(props){var _this4;_classCallCheck(this,MineBox);_this4=_super2.call(this,props);_this4.checkIsMine=_this4.checkIsMine.bind(_assertThisInitialized(_this4));_this4.handleClick=_this4.handleClick.bind(_assertThisInitialized(_this4));_this4.picMap={0:pic0,1:pic1,2:pic2,3:pic3,4:pic4,5:pic5,6:pic6,7:pic7,8:pic8};// this.handleSubmit = this.handleSubmit.bind(this);\nreturn _this4;}_createClass(MineBox,[{key:\"checkIsMine\",value:function checkIsMine(){return this.props.isMine;}},{key:\"handleClick\",value:function handleClick(e){var isShift=e.shiftKey;console.log(e.target);var boxData={isMine:this.props.isMine,value:this.props.value,flag:this.props.flagged,id:this.props.id};this.props.click(isShift,boxData);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"img\",{src:this.props.showAll||this.props.revealed?this.props.isMine?mine:this.picMap[this.props.value]:this.props.flagged?flag:base,className:\"Box-logo \",alt:this.props.value,onClick:this.handleClick});}}]);return MineBox;}(React.Component);export default GameBody;","map":{"version":3,"sources":["C:/hometaskwix/minesweeper/src/components/gameBody.js"],"names":["React","logo","base","flag","pic0","pic1","pic2","pic3","pic4","pic5","pic6","pic7","pic8","mine","genie","Col","Row","Grid","GameHeder","GameBody","props","state","height","width","mines","flags","good","bad","gameStatus","showAll","alert","dataTable","newGame","bind","updateGameSettings","createDataTable","setMines","applyAround","increaseValue","onClick","fixFlags","formatBoxesTable","reveal","revealAll","superman","handleSuperman","console","log","setState","newGameData","Array","from","length","value","isMine","revealed","flagged","mineCount","x","Math","floor","random","y","rows","cells","elem","toString","push","newRow","createElement","className","newTable","point","toApplyFunc","checkAndApply","shift","box","gameOver","id","convertId","currBox","goodOrBad","change","tempGrid","split","toReveal","event","Component","MineBox","checkIsMine","handleClick","picMap","e","isShift","shiftKey","target","boxData","click"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport logo from '../images/logo192.png';\r\nimport base from '../images/base.png';\r\nimport flag from '../images/flag.png';\r\nimport pic0 from '../images/0.png';\r\nimport pic1 from '../images/1.png';\r\nimport pic2 from '../images/2.png';\r\nimport pic3 from '../images/3.png';\r\nimport pic4 from '../images/4.png';\r\nimport pic5 from '../images/5.png';\r\nimport pic6 from '../images/6.png';\r\nimport pic7 from '../images/7.png';\r\nimport pic8 from '../images/8.png';\r\nimport mine from '../images/mine.png';\r\nimport genie from '../images/genie.png';\r\n\r\nimport '../App.css';\r\nimport { Col, Row, Grid } from 'react-flexbox-grid'\r\nimport GameHeder from './gameHeader.js'\r\n\r\nclass GameBody extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            height: 10, \r\n            width: 10, \r\n            mines: 10, \r\n            flags: {good: 0, bad: 0}, \r\n            gameStatus:\"pre\",\r\n            showAll:false,\r\n            alert: \"\",\r\n            dataTable: []};\r\n\r\n        this.newGame = this.newGame.bind(this);\r\n        this.updateGameSettings = this.updateGameSettings.bind(this);\r\n        this.createDataTable = this.createDataTable.bind(this);\r\n        this.setMines = this.setMines.bind(this);\r\n        this.applyAround = this.applyAround.bind(this);\r\n        this.increaseValue = this.increaseValue.bind(this);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.fixFlags = this.fixFlags.bind(this);\r\n        this.formatBoxesTable = this.formatBoxesTable.bind(this);\r\n        this.reveal = this.reveal.bind(this);\r\n        this.revealAll = this.revealAll.bind(this);\r\n        this.superman = this.superman.bind(this);   \r\n        this.handleSuperman = this.handleSuperman.bind(this);\r\n    }\r\n\r\n    newGame() {\r\n        console.log(\"new Game\");\r\n        this.dataTable = this.createDataTable()\r\n        this.setMines();\r\n        console.log(\"new Game data\");\r\n        console.log(this.dataTable);\r\n        this.setState({dataTable: this.dataTable, gameStatus:\"ongoing\", showAll:false});                    \r\n    }\r\n    \r\n    updateGameSettings(newGameData) {\r\n        console.log(\"update game\")\r\n        newGameData.gameStatus = \"pre\";\r\n        newGameData.flags = {good: 0, bad: 0};\r\n        this.setState(newGameData, this.newGame);        \r\n    } \r\n\r\n    createDataTable() {\r\n        console.log(\"create data State\");\r\n\r\n        var dataTable = Array.from({length: this.state.width}, () => Array.from({length: this.state.height}, () => ({value: 0, isMine: false, revealed:false, flagged:false})))\r\n\r\n        return dataTable;\r\n    }\r\n\r\n    setMines() {\r\n        console.log(\"set Mines\");\r\n        for(let mineCount = 0; mineCount < this.state.mines; mineCount++)\r\n        {\r\n            let x = Math.floor(Math.random() * (this.state.width));\r\n            let y = Math.floor(Math.random() * (this.state.height));\r\n            \r\n            //if(!this.boxesTable[x][y].checkIsMine())\r\n            if(!this.dataTable[x][y].isMine)            \r\n            {\r\n                //this.boxesTable[x][y].setMine()\r\n                this.dataTable[x][y].isMine = true;\r\n                \r\n                this.applyAround({x,y},this.increaseValue)\r\n            }\r\n            else\r\n            {\r\n                mineCount--\r\n            }\r\n        }\r\n\r\n        console.log(this.dataTable);\r\n\r\n    }\r\n\r\n    formatBoxesTable() {\r\n        console.log(this.state.dataTable);\r\n        if (this.state.gameStatus === \"pre\")\r\n        {\r\n            return;\r\n        }\r\n\r\n\r\n        let rows = [];\r\n        for (let height = 0; height < this.state.height; height++) {\r\n            let cells = [];\r\n            for (let width = 0; width < this.state.width; width++) {\r\n\r\n                let elem = <Col key={width.toString() + \",\" + height.toString()}>\r\n                    <MineBox id={width.toString() + \",\" + height.toString()} \r\n                             click={this.onClick} \r\n                             isMine={this.state.dataTable[width][height].isMine} \r\n                             value={this.state.dataTable[width][height].value}\r\n                             revealed={this.state.dataTable[width][height].revealed}\r\n                             flagged={this.state.dataTable[width][height].flagged}\r\n                             showAll={this.state.showAll}\r\n                             ></MineBox>\r\n                </Col> ;\r\n                cells.push(elem);\r\n            }\r\n            let newRow = React.createElement(\r\n                Row,\r\n                {className: \"Mine-row\"},\r\n                cells\r\n            )\r\n            rows.push(newRow)\r\n        }\r\n\r\n        let newTable = React.createElement(\r\n            Grid,\r\n            {className: \"Mine-grid\"},\r\n            rows\r\n        )\r\n\r\n        return newTable;\r\n    }\r\n\r\n    applyAround(point,toApplyFunc)\r\n    {        \r\n        \r\n        let height = this.state.height;\r\n        let width = this.state.width;\r\n        function checkAndApply(point){// check and apply\r\n            console.log(\"check and apply\");\r\n            console.log(point);\r\n            if(point.x >= 0 && point.y >= 0 && point.x < width && point.y < height) \r\n            {\r\n                toApplyFunc(point)\r\n            }\r\n        }\r\n\r\n        let {x,y} = point;\r\n        \r\n        // left side          \r\n        checkAndApply({x: x - 1, y});// <-\r\n        checkAndApply({x: x - 1, y: y - 1});//<-^\r\n        checkAndApply({x: x - 1, y: y + 1})//<-v\r\n          \r\n        // right side\r\n        checkAndApply({x: x + 1, y});// ->\r\n        checkAndApply({x: x + 1, y: y -1});// ->^\r\n        checkAndApply({x: x + 1, y: y + 1})// -> v\r\n          \r\n        // up and down\r\n        checkAndApply({x, y: y - 1});// ^\r\n        checkAndApply({x, y: y + 1})// V\r\n    }\r\n\r\n    increaseValue (point) {\r\n        this.dataTable[point.x][point.y].value++;\r\n    }\r\n\r\n    onClick (shift, box) {\r\n        console.log(\"on click\");\r\n        if (shift)\r\n        {\r\n            this.fixFlags(box)\r\n        }\r\n        else\r\n        {\r\n            if (box.isMine)\r\n            {\r\n                this.gameOver()\r\n            }\r\n\r\n\r\n            let id = this.convertId(box.id)\r\n            this.reveal(id)\r\n        }\r\n        \r\n\r\n    }\r\n\r\n    fixFlags(box){\r\n        \r\n        let {x,y} = this.convertId(box.id);\r\n        let currBox = this.state.dataTable[x][y];\r\n\r\n        if (this.state.flags.bad + this.state.flags.good == this.state.mines && !currBox.flagged)\r\n        {\r\n            let alert = <h4>Your out of Flags!</h4>;\r\n            this.setState({alert});\r\n            return;\r\n        }\r\n\r\n        var goodOrBad = currBox.isMine ? \"good\" : \"bad\";\r\n        var change = currBox.flagged ? -1 : 1;\r\n        \r\n        \r\n        let {flags} = this.state;\r\n        \r\n        flags[goodOrBad] += change;\r\n        this.setState({flags, alert: \"\"}, ()=>{\r\n            if (this.state.flags.good == this.state.mines)\r\n            {\r\n                this.setState({gameStatus:\"win\"});\r\n                this.revealAll(true);\r\n            }\r\n        })\r\n        \r\n        let tempGrid = this.state.dataTable;\r\n        tempGrid[x][y].flagged = !tempGrid[x][y].flagged;\r\n        this.setState({dataTable: tempGrid});\r\n    }\r\n\r\n    reveal(id){\r\n        let {x,y} = id;\r\n        \r\n        let tempGrid = this.state.dataTable;\r\n        console.log(id);\r\n        if (!tempGrid[x][y].flagged && !tempGrid[x][y].revealed)\r\n        {\r\n            tempGrid[x][y].revealed = true;\r\n            console.log(\"revealed:\" + x + \",\" + y);\r\n            this.setState({dataTable: tempGrid});\r\n\r\n            if (tempGrid[x][y].value == 0)\r\n            {\r\n                this.applyAround(id, this.reveal)\r\n            }\r\n        }\r\n    }\r\n\r\n    convertId(id) { \r\n        if (typeof id == \"string\")\r\n        {\r\n            let [x,y]= id.split(\",\");\r\n            x = x * 1;\r\n            y = y * 1;\r\n            return {x,y};\r\n        }\r\n        return id;\r\n    };\r\n\r\n    gameOver(){\r\n        this.revealAll(true);\r\n        this.setState({gameStatus:\"lose\"});\r\n    }\r\n\r\n    revealAll(toReveal){\r\n        \r\n        this.setState({showAll: toReveal});\r\n    }\r\n\r\n    handleSuperman(event){\r\n        this.state.showAll? this.revealAll(false): this.revealAll(true);\r\n    }\r\n\r\n    superman(){\r\n\r\n        if (this.state.gameStatus !== \"ongoing\")\r\n        return;\r\n\r\n        let superman = <div>\r\n            <h4>Do you wish to see the answer? <img src={genie} \r\n                                                    className={\"Genie-pic\"} \r\n                                                    alt=\"see the truth!\" \r\n                                                    onClick={this.handleSuperman}/></h4>\r\n        </div>\r\n\r\n        return superman;\r\n    }\r\n\r\n    render() {\r\n        \r\n        return (\r\n        <div>\r\n            <GameHeder height={this.state.height} \r\n                       width={this.state.width} \r\n                       mines={this.state.mines}\r\n                       flags={this.state.flags}\r\n                       update={this.updateGameSettings}\r\n                       status={this.state.gameStatus}></GameHeder>\r\n            {this.state.alert}\r\n            {this.formatBoxesTable()}\r\n            {this.superman()}\r\n        </div>\r\n        );\r\n    };\r\n}\r\n\r\n\r\nclass MineBox extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.checkIsMine = this.checkIsMine.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.picMap = {\r\n            0: pic0,\r\n            1: pic1,\r\n            2: pic2,\r\n            3: pic3,\r\n            4: pic4,\r\n            5: pic5,\r\n            6: pic6,\r\n            7: pic7,\r\n            8: pic8\r\n        }\r\n        \r\n        // this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    checkIsMine() {\r\n        return this.props.isMine;\r\n    }\r\n   \r\n\r\n    handleClick (e) {\r\n        const isShift = e.shiftKey;\r\n        console.log(e.target);\r\n        \r\n\r\n        let boxData = {\r\n            isMine: this.props.isMine,\r\n            value: this.props.value,\r\n            flag: this.props.flagged,\r\n            id: this.props.id\r\n        }\r\n\r\n        this.props.click(isShift, boxData);\r\n\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        \r\n          <img src={(this.props.showAll || this.props.revealed)? (this.props.isMine? mine : this.picMap[this.props.value]) : (this.props.flagged? flag: base)} className={\"Box-logo \"} alt={this.props.value} onClick={this.handleClick}/>\r\n        \r\n      );\r\n    }\r\n}\r\nexport default GameBody;\r\n"]},"metadata":{},"sourceType":"module"}